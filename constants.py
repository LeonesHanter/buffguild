# -*- coding: utf-8 -*-
from typing import Any, Dict


VK_API_BASE = "https://api.vk.com/method"
VK_API_VERSION = "5.199"


# –ü–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–±–æ—Ä–∞ –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–∏ –ø–æ–¥–±–æ—Ä–µ –±–∞—Ñ–µ—Ä–∞
CLASS_ORDER = ["apostle", "warlock", "crusader", "light_incarnation"]


# –°–∏–º–≤–æ–ª ‚Üí –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å—ã (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –∏ –ª–æ–≥–∏–∫–µ —Ä–∞—Å)
RACE_NAMES = {
    "—á": "—á–µ–ª–æ–≤–µ–∫",
    "–≥": "–≥–æ–±–ª–∏–Ω",
    "–Ω": "–Ω–µ–∂–∏—Ç–∏",
    "—ç": "—ç–ª—å—Ñ",
    "–º": "–≥–Ω–æ–º",
    "–¥": "–¥–µ–º–æ–Ω",
    "–æ": "–æ—Ä–∫",
}


# –°–∏–º–≤–æ–ª ‚Üí —ç–º–æ–¥–∑–∏ —Ä–∞—Å—ã (–µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã)
RACE_EMOJIS = {
    "—á": "üßç",  # —á–µ–ª–æ–≤–µ–∫
    "–≥": "üëπ",  # –≥–æ–±–ª–∏–Ω
    "–Ω": "üíÄ",  # –Ω–µ–∂–∏—Ç—å
    "—ç": "üßù",  # —ç–ª—å—Ñ
    "–º": "üéÖ",  # –≥–Ω–æ–º
    "–¥": "üòà",  # –¥–µ–º–æ–Ω
    "–æ": "üßü",  # –æ—Ä–∫
}


# –û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –∏ –∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
CLASS_ABILITIES: Dict[str, Dict[str, Any]] = {
    "apostle": {
        "name": "–ê–ø–æ—Å—Ç–æ–ª",
        "prefix": "–±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–µ",
        "uses_voices": True,
        "default_cooldown": 61,
        "abilities": {
            "–∞": "–∞—Ç–∞–∫–∏",
            "–∑": "–∑–∞—â–∏—Ç—ã",
            "—É": "—É–¥–∞—á–∏",
            "—á": "—á–µ–ª–æ–≤–µ–∫–∞",
            "–≥": "–≥–æ–±–ª–∏–Ω–∞",
            "–Ω": "–Ω–µ–∂–∏—Ç–∏",
            "—ç": "—ç–ª—å—Ñ–∞",
            "–º": "–≥–Ω–æ–º–∞",
            "–¥": "–¥–µ–º–æ–Ω–∞",
            "–æ": "–æ—Ä–∫–∞",
        },
    },
    "warlock": {
        "name": "–ü—Ä–æ–∫–ª–∏–Ω–∞—é—â–∏–π",
        "prefix": "–ø—Ä–æ–∫–ª—è—Ç–∏–µ",
        "uses_voices": True,
        # –ö–î –ø—Ä–æ–∫–ª—è—Ç–∏–π: 60 –º–∏–Ω—É—Ç + 1 —Å–µ–∫—É–Ω–¥–∞
        "default_cooldown": 60 * 60 + 1,
        "abilities": {
            "–ª": "–Ω–µ—É–¥–∞—á–∏",
            "–±": "–±–æ–ª–∏",
            "—é": "–¥–æ–±—ã—á–∏",
        },
    },
    "crusader": {
        "name": "–ü–∞–ª–∞–¥–∏–Ω",
        "prefix": "",
        "uses_voices": True,
        "default_cooldown": None,
        "abilities": {
            # –û—á–∏—â–µ–Ω–∏–µ –æ–≥–Ω–µ–º: 15 –º–∏–Ω—É—Ç + 30 —Å–µ–∫—É–Ω–¥
            "—Ç": ("–æ—á–∏—â–µ–Ω–∏–µ –æ–≥–Ω–µ–º", 15 * 60 + 30),
        },
    },
    "light_incarnation": {
        "name": "–ü–∞–ª–∞–¥–∏–Ω",
        "prefix": "",
        "uses_voices": True,
        "default_cooldown": None,
        "abilities": {
            # –ü–æ–ª–Ω–æ–µ –æ—á–∏—â–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–∫–ª—è—Ç–∏–π: 15 –º–∏–Ω—É—Ç + 30 —Å–µ–∫—É–Ω–¥
            "–∏": ("–æ—á–∏—â–µ–Ω–∏–µ", 15 * 60 + 30),
            # –û—á–∏—â–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–º: 15 –º–∏–Ω—É—Ç + 30 —Å–µ–∫—É–Ω–¥
            "—Å": ("–æ—á–∏—â–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–º", 15 * 60 + 30),
        },
    },
    # –ö–ª–∞—Å—Å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è (–Ω–µ –∏–º–µ–µ—Ç –±–æ–µ–≤—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π)
    "observer": {
        "name": "–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å",
        "prefix": "",
        "uses_voices": False,
        "default_cooldown": None,
        "abilities": {},
    },
}

SYSTEM_VERSION = "3.0.0"
SYSTEM_FEATURES = {
    "voice_prophet": True,    # –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å –≥–æ–ª–æ—Å–æ–≤
    "safe_race_timer": True,  # –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ç–∞–π–º–µ—Ä —Ä–∞—Å (-60 —Å–µ–∫)
    "turbo_mode": True,       # –¢—É—Ä–±–æ-—Ä–µ–∂–∏–º (4 –±–∞—Ñ–∞ –∑–∞ 0.45—Å)
}

# –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ç–∞–π–º–µ—Ä —Ä–∞—Å (Safe Race Timer)
TEMP_RACE_SAFETY_MARGIN = 60  # –∑–∞—â–∏—Ç–Ω—ã–π –∑–∞–∑–æ—Ä 60 —Å–µ–∫—É–Ω–¥
TEMP_RACE_DURATION_HOURS = 2  # —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
TEMP_RACE_CLEANUP_INTERVAL = 300  # –æ—á–∏—Å—Ç–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—É—Ä–±–æ-—Ä–µ–∂–∏–º–∞ (Turbo Mode)
TURBO_MODE_CONFIG = {
    "enabled": True,
    "inter_token_delay": 0.15,  # 150 –º—Å –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
    "min_letters": 2,           # –º–∏–Ω–∏–º—É–º –±—É–∫–≤ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
    "max_letters": 4,           # –º–∞–∫—Å–∏–º—É–º –±—É–∫–≤ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ VK)
}

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Voice Prophet
VOICE_PROPHET_CONFIG = {
    "enabled": True,
    "min_check_interval": 15 * 60,     # 15 –º–∏–Ω—É—Ç (–Ω–µ —á–∞—â–µ)
    "max_check_interval": 4 * 60 * 60, # 4 —á–∞—Å–∞ (–Ω–µ —Ä–µ–∂–µ)
    "prediction_lead_time": 15 * 60,   # –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ 15 –º–∏–Ω—É—Ç –¥–æ
    "critical_voices": 3,             # –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å
    "required_history_size": 5,       # –º–∏–Ω–∏–º—É–º —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
    "storage_dir": "data/voice_prophet"
}

RESURRECTION_CONFIG = {
    "command_text": "–≤–æ—Å–∫—Ä–µ—à–µ–Ω–∏–µ",           # –¢–µ–∫—Å—Ç –∫–æ–º–∞–Ω–¥—ã
    "cost_voices": 5,                       # –°—Ç–æ–∏–º–æ—Å—Ç—å –≤ –≥–æ–ª–æ—Å–∞—Ö (1)
    "cost_balance": 100,                   # –°—Ç–æ–∏–º–æ—Å—Ç—å –≤ –±–∞–ª–ª–∞—Ö (100)
    "cooldown": 6 * 60 * 60 + 1,           # 6 —á–∞—Å–æ–≤ + 1 —Å–µ–∫—É–Ω–¥–∞
    "social_cooldown": 62,                # –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –ö–î
    "min_voices": 5,                      # –ú–∏–Ω–∏–º—É–º –≥–æ–ª–æ—Å–æ–≤ (1)
}
